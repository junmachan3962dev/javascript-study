#### **1. DOMとは「巨大なオブジェクトの木」である**

HTMLの要素（`<div>`や`<li>`）は、JavaScriptから見ればただの「**オブジェクト型**」のデータです。ブラウザがHTMLを読み込んだ瞬間、すべての要素に「**住所（参照）**」が割り当てられ、メモリ上に展開されます。

#### **2. 要素の取得（住所の特定）**

変数に代入されるのは、要素そのものではなく「**住所（参照）**」です。

```
// IDで取得（1つの住所）
const title = document.getElementById("main-title");

// セレクタで取得（最初に見つかった1つの住所）
const activeBtn = document.querySelector(".btn.active");

// 全取得（住所が詰まったリスト。※配列に似ているが別物のオブジェクト）
const items = document.querySelectorAll(".item");
```

#### **3. 要素の生成と追加（新築と合流）**

`createElement` はメモリ上に**新しい住所を発行**する行為です。

```
// 1. 新しい住所を発行（まだ画面には存在しない「浮いた」状態）
const newLi = document.createElement("li");

// 2. プロパティ（値）を操作
newLi.textContent = "新しいリスト";

// 3. 既存の住所（親）に合流させる
const list = document.querySelector("ul");
list.appendChild(newLi); // ここで初めてDOMツリーに繋がる
```

上記の3点セットで大体9割はカバーできるがそのほかに2点覚えた方がいいものを下記に記す。

1. **差し込む場所をコントロールする：`insertBefore`**

`appendChild` は常に「一番最後（末尾）」に追加します。 もし「**一番上に追加したい**」や「**特定の要素の前に割り込みたい**」ときはこれを使います。

```
// 「親」の住所.insertBefore(「新築の住所」, 「この人の前に」という目印の住所)
list.insertBefore(newLi, list.firstChild); // リストの先頭に割り込み！
```

2. **オブジェクトを消し去る：`remove()`**

住所を特定して、その要素をメモリの「家系図」から削除します。

```
const target = document.querySelector(".old-item");
target.remove(); // 画面から消える
```

**住所の視点での「最終確認」**

上記の３点セットを、これまでの「住所（参照）」の視点で図解するとこうなります。

1. **`createElement`**: メモリの広大な空き地に、ポツンと新しい家（オブジェクト）を建てる。まだ住所録（DOMツリー）には載っていない。
    
2. **`textContent`**: その家の中に家具（文字列）を運び込む。
    
3. **`appendChild`**: 市役所（ブラウザ）に行って、既存の大きな家（親要素）の「住所録」に、この新しい家の住所を登録する。**ここで初めて、世間（画面）から見えるようになる。**

#### **4. プロパティとクラスの操作**

直接スタイルを書き換えるより、**クラス（設計図）の付け替え**が推奨されます。

```
const box = document.querySelector(".box");

box.classList.add("is-visible");    // クラスの追加
box.classList.remove("is-hidden"); // クラスの削除
box.classList.toggle("is-active"); // スイッチ（あれば消す、なければ足す）
```

#### **5. DOMにおける「共有の罠」**

DOMもオブジェクトなので、代入すると住所が共有されます。

JavaScript

```
const elA = document.querySelector(".my-el");
const elB = elA; // 住所の共有

elB.textContent = "書き換えたよ"; 
console.log(elA.textContent); // "書き換えたよ"（elAも変わっている）
```

